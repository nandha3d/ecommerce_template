import{c as _,u as D,r as s,j as e,a as E,B as a,b as F,g as M,E as A,d as L,e as $,f as N,h as o}from"./index-BEYPvdD8.js";import{A as q}from"./AdminLayout-CYLxn9p4.js";import{C as B}from"./Card-DURhmg8t.js";import{M as I}from"./Modal-ClyrXK3F.js";import{S as T}from"./square-pen-NwD7cd36.js";const R=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],v=_("refresh-cw",R),W=()=>{const x=D(),[u,b]=s.useState(""),[l,m]=s.useState(1),[r,w]=s.useState([]),[p,h]=s.useState(!0),[f,n]=s.useState(null),[j,P]=s.useState({total:0,lastPage:1,perPage:12}),[i,c]=s.useState({open:!1,product:null}),[g,y]=s.useState(!1),d=async()=>{h(!0),n(null);try{const t=await N.get("/products",{params:{page:l,per_page:12,search:u||void 0,include_all:!0}});w(t.data.data||[]),P({total:t.data.meta?.total||0,lastPage:t.data.meta?.last_page||1,perPage:t.data.meta?.per_page||12})}catch(t){n(t.message||"Failed to fetch products"),console.error("Error fetching products:",t)}finally{h(!1)}};s.useEffect(()=>{d()},[l]),s.useEffect(()=>{const t=setTimeout(()=>{l===1?d():m(1)},500);return()=>clearTimeout(t)},[u]);const k=async()=>{if(i.product){y(!0);try{await N.delete(`/admin/products/${i.product.id}`),c({open:!1,product:null}),d()}catch(t){n(t.response?.data?.message||"Failed to delete product")}finally{y(!1)}}},S=t=>t.is_active?t.stock_quantity===0?e.jsx(o,{variant:"danger",children:"Out of Stock"}):t.stock_quantity<10?e.jsx(o,{variant:"warning",children:"Low Stock"}):e.jsx(o,{variant:"success",children:"Active"}):e.jsx(o,{variant:"default",children:"Draft"});return e.jsxs(q,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-6",children:[e.jsxs("div",{className:"flex gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:u,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsx(a,{variant:"outline",leftIcon:e.jsx(v,{className:"w-4 h-4"}),onClick:d,children:"Refresh"})]}),e.jsx(a,{leftIcon:e.jsx(F,{className:"w-4 h-4"}),onClick:()=>x("/admin/products/new"),children:"Add Product"})]}),f&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[f,e.jsx("button",{onClick:()=>n(null),className:"ml-4 underline",children:"Dismiss"})]}),e.jsxs(B,{padding:"none",children:[p?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(v,{className:"w-8 h-8 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-3 text-neutral-600",children:"Loading products..."})]}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-neutral-500",children:[e.jsx("p",{className:"text-lg mb-4",children:"No products found"}),e.jsx(a,{onClick:()=>x("/admin/products/new"),children:"Add Your First Product"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"SKU"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Variants"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-neutral-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-neutral-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-neutral-100",children:r.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-neutral-100 rounded-lg flex items-center justify-center overflow-hidden",children:t.primary_image?e.jsx("img",{src:M(t.primary_image),alt:t.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-2xl",children:"ðŸ“¦"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-primary-900 block",children:t.name}),t.is_featured&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"Featured"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-neutral-600 font-mono text-sm",children:t.sku}),e.jsx("td",{className:"px-6 py-4 text-neutral-600",children:t.categories?.map(C=>C.name).join(", ")||"Uncategorized"}),e.jsx("td",{className:"px-6 py-4",children:t.sale_price&&t.sale_price<t.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium text-green-600",children:["$",t.sale_price.toFixed(2)]}),e.jsxs("span",{className:"ml-2 text-sm text-neutral-400 line-through",children:["$",t.price.toFixed(2)]})]}):e.jsxs("span",{className:"font-medium",children:["$",t.price.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 text-neutral-600",children:t.stock_quantity}),e.jsx("td",{className:"px-6 py-4 text-neutral-600",children:t.variants?.length||0}),e.jsx("td",{className:"px-6 py-4",children:S(t)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>window.open(`/products/${t.slug}`,"_blank"),className:"p-2 text-neutral-400 hover:text-primary-500 hover:bg-primary-50 rounded-lg transition-colors",title:"View on site",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(`/admin/products/${t.id}/edit`),className:"p-2 text-neutral-400 hover:text-primary-500 hover:bg-primary-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c({open:!0,product:t}),className:"p-2 text-neutral-400 hover:text-danger hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(L,{className:"w-4 h-4"})})]})})]},t.id))})]})}),!p&&r.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-neutral-100 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",r.length," of ",j.total," products"]}),e.jsx($,{currentPage:l,totalPages:j.lastPage,onPageChange:m})]})]}),e.jsx(I,{isOpen:i.open,onClose:()=>c({open:!1,product:null}),title:"Delete Product",size:"sm",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-neutral-600 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:i.product?.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(a,{variant:"outline",fullWidth:!0,onClick:()=>c({open:!1,product:null}),children:"Cancel"}),e.jsx(a,{variant:"danger",fullWidth:!0,onClick:k,disabled:g,children:g?"Deleting...":"Delete Product"})]})]})})]})};export{W as default};
