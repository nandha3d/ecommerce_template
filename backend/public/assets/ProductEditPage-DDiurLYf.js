import{c as p,k as ye,u as Ne,r as m,j as e,B as f,P as _e,l as ve,h as y,I as x,G as we,X as A,b as N,d as P,C as ke,E as Ce,m as ze,f as h}from"./index-Cy8_FwMa.js";import{A as O}from"./AdminLayout-DAeZKiG-.js";import{C as w}from"./Card-CZWDoyXz.js";import{S as Se,I as Ae,C as Pe}from"./save-BlT-zwJz.js";import{D as $e}from"./dollar-sign-Bg-O0eln.js";const qe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fe=p("arrow-left",qe);const De=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Me=p("circle-alert",De);const Te=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ve=p("copy",Te);const Ee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],L=p("file-text",Ee);const Ue=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],B=p("layers",Ue);const Oe=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Le=p("layout-grid",Oe);const Be=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Ge=p("sliders-vertical",Be);const Re=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],G=p("tags",Re);const He=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ke=p("upload",He),R=d=>d?d.startsWith("http")?d:`${"http://localhost:8000/api/v1".replace("/api/v1","")||"http://localhost:8000"}${d}`:"",Je={name:"",sku:"",description:"",short_description:"",price:0,sale_price:null,stock_quantity:0,brand_id:null,category_ids:[],is_active:!0,is_featured:!1,is_new:!0,is_bestseller:!1,seo_title:"",seo_description:"",ingredients:"",images:[],variants:[],is_digital:!1,is_downloadable:!1,download_limit:null,download_expiry_days:null,has_customization:!1,customization_fields:[],custom_tabs:[],image_layout:"horizontal",addon_groups:[]},Ie=()=>{const{id:d}=ye(),k=Ne(),_=!!(d&&d!=="new"),[u,H]=m.useState("basic"),[i,o]=m.useState(Je),[K,J]=m.useState([]),[Q,W]=m.useState([]),[$,X]=m.useState([]),[Y,q]=m.useState(!1),[F,D]=m.useState(!1),[M,C]=m.useState(null),[T,V]=m.useState(!1),[Z,I]=m.useState({});m.useEffect(()=>{(async()=>{try{const[s,t,r]=await Promise.all([h.get("/admin/categories"),h.get("/admin/brands"),h.get("/admin/attributes").catch(()=>({data:{data:[]}}))]);J(s.data.data||[]),W(t.data.data||[]),X(r.data.data||[])}catch(s){console.error("Failed to fetch options:",s)}})()},[]),m.useEffect(()=>{_&&d&&(async()=>{q(!0);try{const t=(await h.get(`/admin/products/${d}`)).data.data,r=(t.variants||[]).map(l=>{let n={};try{n=typeof l.attributes=="string"?JSON.parse(l.attributes):l.attributes||{}}catch(g){console.error("Failed to parse variant attributes:",g),n={}}return{id:l.id,sku:l.sku||"",name:l.name||"",price:Number(l.price)||0,sale_price:l.sale_price?Number(l.sale_price):null,stock_quantity:Number(l.stock_quantity)||0,attributes:n,image:l.image||null,is_active:l.is_active??!0}});o({name:t.name||"",sku:t.sku||"",description:t.description||"",short_description:t.short_description||"",price:t.price||0,sale_price:t.sale_price||null,stock_quantity:t.stock_quantity||0,brand_id:t.brand_id||null,category_ids:t.categories?.map(l=>l.id)||[],is_active:t.is_active??!0,is_featured:t.is_featured??!1,is_new:t.is_new??!1,is_bestseller:t.is_bestseller??!1,seo_title:t.seo_title||"",seo_description:t.seo_description||"",ingredients:t.ingredients||"",images:t.images||[],variants:r,is_digital:t.is_digital??!1,is_downloadable:t.is_downloadable??!1,download_limit:t.download_limit,download_expiry_days:t.download_expiry_days,has_customization:t.has_customization??!1,customization_fields:t.customization_fields||[],custom_tabs:t.custom_tabs||[],image_layout:t.image_layout||"horizontal",addon_groups:t.addon_groups||[]})}catch(s){C(s.message||"Failed to fetch product")}finally{q(!1)}})()},[d,_]);const c=(a,s)=>{o(t=>({...t,[a]:s}))},ee=async a=>{V(!0);try{const s=new FormData;Array.from(a).forEach(l=>{s.append("images[]",l)});const r=(await h.post("/admin/upload/images",s,{headers:{"Content-Type":"multipart/form-data"}})).data.data.map((l,n)=>({url:l.url,alt_text:i.name||"Product image",is_primary:i.images.length===0&&n===0,sort_order:i.images.length+n}));o(l=>({...l,images:[...l.images,...r]}))}catch(s){C("Failed to upload images: "+(s.message||"Unknown error"))}finally{V(!1)}},ae=a=>{o(s=>({...s,images:s.images.filter((t,r)=>r!==a)}))},se=a=>{o(s=>({...s,images:s.images.map((t,r)=>({...t,is_primary:r===a}))}))},te=()=>{const a={sku:`${i.sku||"SKU"}-VAR-${i.variants.length+1}`,name:"",price:i.price||0,sale_price:null,stock_quantity:0,attributes:{},image:null,is_active:!0};o(s=>({...s,variants:[...s.variants,a]}))},b=(a,s,t)=>{o(r=>({...r,variants:r.variants.map((l,n)=>n===a?{...l,[s]:t}:l)}))},re=(a,s,t)=>{o(r=>{const l=r.variants.map((n,g)=>{if(g!==a)return n;const v={...n.attributes,[s]:t},j=Object.values(v).filter(Boolean),je=j.length>0?`${r.sku||"SKU"}-${j.join("-").toLowerCase().replace(/\s+/g,"-")}`:n.sku,fe=j.length>0?j.join(" - "):n.name;return{...n,attributes:v,sku:je,name:fe}});return{...r,variants:l}})},ie=a=>{const s=i.variants[a],t={...s,id:void 0,sku:`${s.sku}-copy`,name:`${s.name} (Copy)`};o(r=>({...r,variants:[...r.variants,t]}))},le=a=>{o(s=>({...s,variants:s.variants.filter((t,r)=>r!==a)}))},ne=async(a,s)=>{const t=new FormData;t.append("image",s),t.append("folder","variants");try{const r=await h.post("/admin/upload/image",t,{headers:{"Content-Type":"multipart/form-data"}});r.data?.success&&r.data?.data?.url&&b(a,"image",r.data.data.url)}catch(r){console.error("Failed to upload variant image:",r)}},oe=()=>{const a={id:`tab-${Date.now()}`,title:"New Tab",content:"",sort_order:i.custom_tabs.length};o(s=>({...s,custom_tabs:[...s.custom_tabs,a]}))},E=(a,s,t)=>{o(r=>({...r,custom_tabs:r.custom_tabs.map((l,n)=>n===a?{...l,[s]:t}:l)}))},ce=a=>{o(s=>({...s,custom_tabs:s.custom_tabs.filter((t,r)=>r!==a)}))},de=()=>{const a={name:"New Add-on Group",selection_type:"multiple",is_required:!1,min_selections:0,max_selections:null,options:[]};o(s=>({...s,addon_groups:[...s.addon_groups,a]}))},z=(a,s,t)=>{o(r=>({...r,addon_groups:r.addon_groups.map((l,n)=>n===a?{...l,[s]:t}:l)}))},me=a=>{o(s=>({...s,addon_groups:s.addon_groups.filter((t,r)=>r!==a)}))},ue=a=>{const s={name:"",price:0,is_default:!1};o(t=>({...t,addon_groups:t.addon_groups.map((r,l)=>l===a?{...r,options:[...r.options,s]}:r)}))},U=(a,s,t,r)=>{o(l=>({...l,addon_groups:l.addon_groups.map((n,g)=>g===a?{...n,options:n.options.map((v,j)=>j===s?{...v,[t]:r}:v)}:n)}))},pe=(a,s)=>{o(t=>({...t,addon_groups:t.addon_groups.map((r,l)=>l===a?{...r,options:r.options.filter((n,g)=>g!==s)}:r)}))},xe=()=>{const a={id:`field-${Date.now()}`,type:"text",label:"Custom Field",required:!1,placeholder:""};o(s=>({...s,customization_fields:[...s.customization_fields,a]}))},S=(a,s,t)=>{o(r=>({...r,customization_fields:r.customization_fields.map((l,n)=>n===a?{...l,[s]:t}:l)}))},he=a=>{o(s=>({...s,customization_fields:s.customization_fields.filter((t,r)=>r!==a)}))},ge=async()=>{D(!0),C(null);try{const a={...i,images:i.images.map((s,t)=>({...s,sort_order:t}))};_?await h.put(`/admin/products/${d}`,a):await h.post("/admin/products",a),k("/admin/products")}catch(a){C(a.response?.data?.message||a.message||"Failed to save product")}finally{D(!1)}},be=[{id:"basic",label:"Basic Info",icon:_e},{id:"pricing",label:"Pricing",icon:$e},{id:"images",label:"Images",icon:Ae},{id:"variants",label:"Variants",icon:G},{id:"addons",label:"Add-ons",icon:B},{id:"customization",label:"Customization",icon:Ge},{id:"tabs",label:"Custom Tabs",icon:L},{id:"seo",label:"SEO",icon:ve}];return Y?e.jsx(O,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})})}):e.jsxs(O,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{variant:"ghost",onClick:()=>k("/admin/products"),children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:_?"Edit Product":"Create Product"}),_&&e.jsxs("p",{className:"text-neutral-500 text-sm",children:["ID: ",d]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>k("/admin/products"),children:"Cancel"}),e.jsx(f,{onClick:ge,disabled:F,children:F?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"})," Save"]})})]})]}),M&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3 text-red-700",children:[e.jsx(Me,{className:"w-5 h-5"}),M]}),e.jsx("div",{className:"flex gap-1 mb-6 overflow-x-auto pb-2 border-b border-neutral-200",children:be.map(a=>e.jsxs("button",{onClick:()=>H(a.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-t-lg font-medium transition-all whitespace-nowrap ${u===a.id?"bg-primary-500 text-white":"text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(w,{className:"rounded-2xl shadow-sm",children:[u==="basic"&&e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.is_digital,onChange:a=>c("is_digital",a.target.checked),className:"w-5 h-5 rounded border-neutral-300 text-primary-500"}),e.jsx("span",{className:"font-medium",children:"Digital Product"})]}),i.is_digital&&e.jsx(y,{variant:"info",children:"No shipping required"})]}),e.jsx(x,{label:"Product Name *",value:i.name,onChange:a=>c("name",a.target.value),placeholder:"Enter product name"}),e.jsx(x,{label:"SKU *",value:i.sku,onChange:a=>c("sku",a.target.value),placeholder:"Unique identifier"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Short Description"}),e.jsx("textarea",{value:i.short_description,onChange:a=>c("short_description",a.target.value),rows:2,className:"w-full px-4 py-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Brief summary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Full Description"}),e.jsx("textarea",{value:i.description,onChange:a=>c("description",a.target.value),rows:5,className:"w-full px-4 py-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Detailed description"})]})]}),u==="pricing"&&e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{label:"Price *",type:"number",step:"0.01",value:i.price,onChange:a=>c("price",parseFloat(a.target.value)||0)}),e.jsx(x,{label:"Sale Price",type:"number",step:"0.01",value:i.sale_price||"",onChange:a=>c("sale_price",parseFloat(a.target.value)||null),placeholder:"Leave empty if not on sale"})]}),!i.is_digital&&e.jsx(x,{label:"Stock Quantity",type:"number",value:i.stock_quantity,onChange:a=>c("stock_quantity",parseInt(a.target.value)||0)}),i.is_digital&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl space-y-4",children:[e.jsx("h4",{className:"font-medium text-blue-700",children:"Digital Product Options"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.is_downloadable,onChange:a=>c("is_downloadable",a.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{children:"Downloadable"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{label:"Download Limit",type:"number",value:i.download_limit||"",onChange:a=>c("download_limit",parseInt(a.target.value)||null),placeholder:"Unlimited"}),e.jsx(x,{label:"Expiry (days)",type:"number",value:i.download_expiry_days||"",onChange:a=>c("download_expiry_days",parseInt(a.target.value)||null),placeholder:"Never"})]})]})]}),u==="images"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium",children:"Product Images"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-neutral-500",children:"Layout:"}),e.jsx("button",{onClick:()=>c("image_layout","horizontal"),className:`p-2 rounded-lg ${i.image_layout==="horizontal"?"bg-primary-100 text-primary-600":"hover:bg-neutral-100"}`,title:"Horizontal",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c("image_layout","vertical"),className:`p-2 rounded-lg ${i.image_layout==="vertical"?"bg-primary-100 text-primary-600":"hover:bg-neutral-100"}`,title:"Vertical",children:e.jsx(we,{className:"w-4 h-4"})})]})]}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-neutral-300 rounded-xl cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-all mb-4",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:a=>a.target.files&&ee(a.target.files),disabled:T}),e.jsx(Ke,{className:"w-8 h-8 text-neutral-400 mb-2"}),e.jsx("span",{className:"text-neutral-600",children:T?"Uploading...":"Drop images here or click to upload"})]}),i.images.length>0&&e.jsx("div",{className:`grid gap-4 ${i.image_layout==="vertical"?"grid-cols-2":"grid-cols-4"}`,children:i.images.map((a,s)=>e.jsxs("div",{className:"relative group aspect-square",children:[e.jsx("img",{src:R(a.url),alt:a.alt_text||"Product",className:`w-full h-full object-cover rounded-xl border-2 ${a.is_primary?"border-primary-500":"border-transparent"}`}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 rounded-xl transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>se(s),className:"p-2 bg-white rounded-full",children:"⭐"}),e.jsx("button",{onClick:()=>ae(s),className:"p-2 bg-red-500 text-white rounded-full",children:e.jsx(A,{className:"w-4 h-4"})})]}),a.is_primary&&e.jsx(y,{className:"absolute top-2 left-2",variant:"success",children:"Primary"})]},s))})]}),u==="variants"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-medium",children:"Product Variants"}),e.jsxs(f,{onClick:te,size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-1"})," Add Variant"]})]}),i.variants.length===0?e.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[e.jsx(G,{className:"w-12 h-12 mx-auto mb-3 opacity-40"}),e.jsx("p",{children:"No variants. Add variants for sizes, colors, etc."})]}):e.jsx("div",{className:"space-y-2",children:i.variants.map((a,s)=>{const t=Z[s]??!1;return e.jsxs("div",{className:`border rounded-xl overflow-hidden transition-all ${t?"border-primary-300 bg-primary-50/30":"border-neutral-200 bg-white"}`,children:[e.jsxs("div",{onClick:()=>I(r=>({...r,[s]:!t})),className:"flex items-center justify-between p-3 cursor-pointer hover:bg-neutral-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-neutral-100 rounded text-xs font-medium text-neutral-600",children:s+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-neutral-800 truncate block",children:a.name||`Variant ${s+1}`}),e.jsxs("span",{className:"text-xs text-neutral-500",children:["SKU: ",a.sku||"—"," • $",(Number(a.price)||0).toFixed(2)," • Stock: ",a.stock_quantity??0]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),ie(s)},className:"p-1.5 text-neutral-400 hover:text-blue-500 hover:bg-blue-50 rounded",title:"Duplicate",children:e.jsx(Ve,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),le(s)},className:"p-1.5 text-neutral-400 hover:text-red-500 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(P,{className:"w-3.5 h-3.5"})}),t?e.jsx(Pe,{className:"w-4 h-4 text-neutral-400"}):e.jsx(ke,{className:"w-4 h-4 text-neutral-400"})]})]}),t&&e.jsxs("div",{className:"px-3 pb-3 space-y-3 border-t border-neutral-100",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2 pt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-neutral-500 mb-1",children:"Name"}),e.jsx("input",{value:a.name||"",onChange:r=>b(s,"name",r.target.value),className:"w-full px-2 py-1.5 text-sm rounded-lg border border-neutral-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-neutral-500 mb-1",children:"SKU"}),e.jsx("input",{value:a.sku||"",onChange:r=>b(s,"sku",r.target.value),className:"w-full px-2 py-1.5 text-sm rounded-lg border border-neutral-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-neutral-500 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:a.price??0,onChange:r=>b(s,"price",parseFloat(r.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded-lg border border-neutral-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-neutral-500 mb-1",children:"Stock"}),e.jsx("input",{type:"number",value:a.stock_quantity??0,onChange:r=>b(s,"stock_quantity",parseInt(r.target.value)||0),className:"w-full px-2 py-1.5 text-sm rounded-lg border border-neutral-200 focus:ring-1 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-neutral-500 mb-1",children:"Image"}),a.image?e.jsxs("div",{className:"relative w-12 h-12 group",children:[e.jsx("img",{src:R(a.image),alt:"Variant",className:"w-12 h-12 object-cover rounded-lg border border-neutral-200"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),b(s,"image",null)},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full text-xs flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove image",children:"×"})]}):e.jsxs("label",{className:"flex items-center justify-center w-12 h-12 border-2 border-dashed border-neutral-300 rounded-lg cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-all",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:r=>r.target.files?.[0]&&ne(s,r.target.files[0]),className:"hidden"}),e.jsx(N,{className:"w-5 h-5 text-neutral-400"})]})]})]}),$.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-neutral-100",children:$.map(r=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("label",{className:"text-xs text-neutral-500 whitespace-nowrap",children:[r.name,":"]}),e.jsxs("select",{value:a.attributes?.[r.name]||"",onChange:l=>re(s,r.name,l.target.value),className:"px-2 py-1 text-xs rounded border border-neutral-200 bg-white min-w-[80px] max-w-[120px] focus:ring-1 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Select"}),r.options?.map(l=>e.jsx("option",{value:l.value,children:l.label||l.value},l.id))]})]},r.id))})]})]},s)})})]}),u==="addons"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Product Add-ons"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Optional extras customers can add (e.g., toppings, gift wrap)"})]}),e.jsxs(f,{onClick:de,size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-1"})," Add Group"]})]}),i.addon_groups.length===0?e.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-3 opacity-40"}),e.jsx("p",{children:'No add-on groups. Add groups like "Toppings" or "Extras".'})]}):e.jsx("div",{className:"space-y-4",children:i.addon_groups.map((a,s)=>e.jsxs("div",{className:"border border-neutral-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-neutral-50 flex items-center justify-between",children:[e.jsx("input",{value:a.name,onChange:t=>z(s,"name",t.target.value),className:"font-medium bg-transparent border-none focus:ring-0 p-0",placeholder:"Group Name"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:a.selection_type,onChange:t=>z(s,"selection_type",t.target.value),className:"text-sm border rounded-lg px-2 py-1",children:[e.jsx("option",{value:"multiple",children:"Multi-select"}),e.jsx("option",{value:"single",children:"Single-select"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:a.is_required,onChange:t=>z(s,"is_required",t.target.checked)}),"Required"]}),e.jsx("button",{onClick:()=>me(s),className:"text-red-500 p-1",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-4 space-y-2",children:[a.options.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{value:t.name,onChange:l=>U(s,r,"name",l.target.value),placeholder:"Option name",className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-neutral-500",children:"+$"}),e.jsx("input",{type:"number",step:"0.01",value:t.price,onChange:l=>U(s,r,"price",parseFloat(l.target.value)||0),className:"w-20 px-2 py-2 border rounded-lg text-sm"})]}),e.jsx("button",{onClick:()=>pe(s,r),className:"text-red-500 p-1",children:e.jsx(A,{className:"w-4 h-4"})})]},r)),e.jsxs("button",{onClick:()=>ue(s),className:"text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3"})," Add Option"]})]})]},s))})]}),u==="customization"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Product Customization"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Allow customers to personalize this product"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:i.has_customization,onChange:a=>c("has_customization",a.target.checked),className:"w-5 h-5 rounded border-neutral-300 text-primary-500"}),e.jsx("span",{className:"font-medium",children:"Enable"})]})]}),i.has_customization&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:i.customization_fields.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-neutral-200 rounded-lg",children:[e.jsxs("select",{value:a.type,onChange:t=>S(s,"type",t.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"textarea",children:"Textarea"}),e.jsx("option",{value:"file",children:"File Upload"}),e.jsx("option",{value:"color",children:"Color Picker"})]}),e.jsx("input",{value:a.label,onChange:t=>S(s,"label",t.target.value),placeholder:"Field Label",className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),e.jsxs("label",{className:"flex items-center gap-1 text-sm whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:a.required,onChange:t=>S(s,"required",t.target.checked)}),"Required"]}),e.jsx("button",{onClick:()=>he(s),className:"text-red-500 p-1",children:e.jsx(A,{className:"w-4 h-4"})})]},a.id))}),e.jsxs("button",{onClick:xe,className:"mt-3 text-sm text-primary-500 hover:text-primary-600 flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"})," Add Field"]})]})]}),u==="tabs"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Custom Product Tabs"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Add tabs like Nutrition Facts, Ingredients, Usage, etc."})]}),e.jsxs(f,{onClick:oe,size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-1"})," Add Tab"]})]}),i.custom_tabs.length===0?e.jsxs("div",{className:"text-center py-12 text-neutral-500",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 opacity-40"}),e.jsx("p",{children:"No custom tabs. Add tabs for additional product information."})]}):e.jsx("div",{className:"space-y-4",children:i.custom_tabs.map((a,s)=>e.jsxs("div",{className:"border border-neutral-200 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-neutral-50 flex items-center justify-between",children:[e.jsx("input",{value:a.title,onChange:t=>E(s,"title",t.target.value),className:"font-medium bg-transparent border-none focus:ring-0 p-0",placeholder:"Tab Title"}),e.jsx("button",{onClick:()=>ce(s),className:"text-red-500 p-1",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("textarea",{value:a.content,onChange:t=>E(s,"content",t.target.value),rows:4,className:"w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-primary-500",placeholder:"Tab content (supports HTML)"})})]},a.id))})]}),u==="seo"&&e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsx(x,{label:"SEO Title",value:i.seo_title,onChange:a=>c("seo_title",a.target.value),placeholder:"Title for search engines"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"SEO Description"}),e.jsx("textarea",{value:i.seo_description,onChange:a=>c("seo_description",a.target.value),rows:3,className:"w-full px-4 py-3 rounded-xl border border-neutral-300 focus:ring-2 focus:ring-primary-500",placeholder:"Meta description (150-160 chars)"}),e.jsxs("p",{className:"text-sm text-neutral-400 mt-1",children:[i.seo_description.length," / 160"]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{className:"rounded-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Publish Status"}),e.jsxs("button",{onClick:()=>c("is_active",!i.is_active),className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${i.is_active?"bg-green-50 border-2 border-green-500":"bg-neutral-50 border-2 border-neutral-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.is_active?e.jsx(Ce,{className:"w-5 h-5 text-green-600"}):e.jsx(ze,{className:"w-5 h-5 text-neutral-400"}),e.jsx("span",{className:`font-medium ${i.is_active?"text-green-700":"text-neutral-600"}`,children:i.is_active?"Published":"Draft"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-all ${i.is_active?"bg-green-500":"bg-neutral-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transition-transform mt-0.5 ${i.is_active?"translate-x-6":"translate-x-0.5"}`})})]})]})}),e.jsx(w,{className:"rounded-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Product Type"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.is_digital&&e.jsx(y,{variant:"info",children:"Digital"}),i.is_featured&&e.jsx(y,{variant:"warning",children:"Featured"}),i.is_new&&e.jsx(y,{variant:"success",children:"New"}),i.is_bestseller&&e.jsx(y,{variant:"success",children:"Bestseller"})]}),e.jsx("div",{className:"space-y-2 mt-3",children:["is_featured","is_new","is_bestseller"].map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i[a],onChange:s=>c(a,s.target.checked),className:"w-4 h-4 rounded border-neutral-300 text-primary-500"}),e.jsx("span",{className:"text-sm capitalize",children:a.replace("is_","")})]},a))})]})}),e.jsx(w,{className:"rounded-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:K.map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.category_ids.includes(a.id),onChange:s=>{s.target.checked?c("category_ids",[...i.category_ids,a.id]):c("category_ids",i.category_ids.filter(t=>t!==a.id))},className:"w-4 h-4 rounded border-neutral-300 text-primary-500"}),e.jsx("span",{className:"text-sm",children:a.name})]},a.id))})]})}),e.jsx(w,{className:"rounded-2xl",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Brand"}),e.jsxs("select",{value:i.brand_id||"",onChange:a=>c("brand_id",a.target.value?parseInt(a.target.value):null),className:"w-full px-3 py-2 rounded-lg border border-neutral-300",children:[e.jsx("option",{value:"",children:"Select brand"}),Q.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})})]})]})]})};export{Ie as default};
